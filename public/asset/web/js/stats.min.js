(function(){function ft(){n.postData(k,{session_type:a,active_session:rt,store_id:e,session_id:h,visitor_id:c,reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f)}function et(){ft();n.postData(y,{store_id:e,session_id:h,visitor_id:c,product_alias:g,action:"view",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},null,f)}function ht(){et();n.postData(y,{store_id:e,session_id:h,visitor_id:c,product_alias:g,action:"search",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},null,f)}function ct(){var a=Bizweb.checkout.line_items;n.postData(k,{session_type:"thank_you_view",active_session:rt,store_id:e,session_id:h,visitor_id:c,reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,from_product_view:d,visit_returning:t},v,f);a.forEach(function(a){n.postData(y,{store_id:e,session_id:h,visitor_id:c,product_id:a.product_id,variant_id:a.variant_id,action:"purchase",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},null,f)})}function nt(n,t,i,r){this.xhr=n;this.url=t;this.method=i;this.body=r}var n=function(){function n(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}}function t(n,t){var i=new URLSearchParams(t.toLowerCase());return i.get(n.toLowerCase())}function i(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*6e4);u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}function u(n,t,i,r){fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(n){return n.json()}).then(function(n){i(n)}).catch(function(n){r(n)})}return{getCookie:n,setCookie:i,getUUID:r,postData:u,getParamValue:t}}(),ut,ot,st,tt;n.getCookie("_landing_full_page")||n.getCookie("_landing_type")||!Bizweb.template||(n.setCookie("_landing_full_page",location.href,21600),n.setCookie("_landing_type",Bizweb.template,21600));var it=window.BizwebAnalytics.tracking_url,w=n.getCookie("_s"),p=n.getCookie("_v"),rt=!!sessionStorage.getItem("active"),i=n.getCookie("_landing_full_page"),r=n.getCookie("_landing_type"),u=unescape(n.getCookie("_landing_page")),t=!1;p&&(ut=n.getCookie("_v_new"),ut||(t=!0));var b=n.getCookie("_origin_reference_site"),k=it+"/api/v1/page-views",y=it+"/api/v1/product-actions",v=function(){n.setCookie("_s",w,30);n.setCookie("_v",p,1576800);n.setCookie("_origin_reference_site",b,43200);t||n.setCookie("_v_new",!0,30)},f=function(n){console.log(n)};w||(w=n.getUUID());p||(p=n.getUUID());b===undefined&&(b=document.referrer);var e=Bizweb?Bizweb.id:0,o=document.referrer,s=b,h=w,c=p,l=location.href,d=!1,a,g;switch(Bizweb.template){case"collection":a=location.pathname!=="/collections/all"?"collection_view":"page_view";break;case"product":d=!0;g=location.pathname;a="product_view";document.referrer!==""&&new URL(document.referrer).pathname==="/search"&&(a="product_view_from_search");break;case"cart":a="cart_view";break;case"checkout":if(Bizweb.Checkout)switch(n.getParamValue("step",location.search)){case"contact_information":a="checkout_contact_view";break;case"shipping_method":a="checkout_shipping_view";break;case"payment_method":a="checkout_payment_view";break;default:a="checkout_all_view"}break;case"thankyou":Bizweb.checkout&&(a="thank_you_view");break;default:a="page_view"}sessionStorage.setItem("active","active");switch(a){case"page_view":case"cart_view":case"checkout_contact_view":case"checkout_shipping_view":case"checkout_payment_view":case"checkout_all_view":case"collection_view":ft();break;case"product_view":et();break;case"product_view_from_search":ht();break;case"thank_you_view":ct()}nt.prototype.onReadyStateChange=function(){this.xhr.readyState===XMLHttpRequest.DONE&&this.handleXhrDone({method:this.method,url:this.url,body:this.body,xhr:this.xhr});this.oldOnReadyStateChange&&this.oldOnReadyStateChange(this.xhr)};nt.prototype.handleXhrDone=function(a){try{switch(a.url){case"/cart/add.js":a.xhr.responseText&&(n.postData(k,{session_type:"add_to_cart",active_session:!0,store_id:e,session_id:h,visitor_id:c,reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,from_product_view:d,visit_returning:t},v,f),n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",a.body),action:"add_to_cart",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f),new URL(location.href).pathname==="/search"&&n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",a.body),action:"search",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f));break;case"/cart/change.js":n.getParamValue("quantity",a.body)==="0"&&n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",a.body),action:"remove_from_cart",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f)}}catch(p){console.log(p.message)}return a};ot=XMLHttpRequest.prototype.open;st=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(n,t){return this._url=t,this._method=n,ot.apply(this,arguments)};XMLHttpRequest.prototype.send=function(n){var t=new nt(this,this._url,this._method,n);return this.addEventListener?this.addEventListener("readystatechange",t.onReadyStateChange.bind(t),!1):(t.oldOnReadyStateChange=this.onreadystatechange,this.onreadystatechange=t.onReadyStateChange),st.call(this,n)};tt=window.fetch;"function"==typeof tt&&(window.fetch=function(){return tt.apply(window,Array.prototype.slice.call(arguments)).then(function(a){if(!a.ok)return a;try{switch(data.url){case"/cart/add.js":n.postData(k,{session_type:"add_to_cart",active_session:!0,store_id:e,session_id:h,visitor_id:c,reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,from_product_view:d,visit_returning:t},v,f);n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",data.body),action:"add_to_cart",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f);new URL(location.href).pathname==="/search"&&n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",data.body),action:"search",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f);break;case"/cart/change.js":n.getParamValue("quantity",query)==="0"&&n.postData(y,{store_id:e,session_id:h,visitor_id:c,variant_id:n.getParamValue("variantId",data.body),action:"remove_from_cart",reference_site:o,origin_reference_site:s,current_site:l,landing_type:r,landing_page:u,landing_full_page:i,visit_returning:t},v,f)}}catch(p){console.log(p.message)}return a})})})();